<?xml version="1.0"?>
<!-- test that a history state never ends up part of the configuration -->
<scxml xmlns="http://www.w3.org/2005/07/scxml" xmlns:conf="http://www.w3.org/2005/scxml-conformance" version="1.0" initial="p1" conf:datamodel="">
  <parallel id="p1">
    <state id="s0">
      <transition cond="in_state(&quot;sh1&quot;)" target="conf:fail"/>
    </state>
    <state id="s1">
      <initial>
        <transition target="sh1"/>
      </initial>
      <history id="sh1">
        <transition target="s11"/>
      </history>
      <state id="s11">
        <transition cond="in_state(&quot;sh1&quot;)" target="conf:fail"/>
        <transition target="s12"/>
      </state>
      <state id="s12"/>
      <transition cond="in_state(&quot;sh1&quot;)" target="conf:fail"/>
      <transition cond="val1 == 0" target="sh1"/>
      <transition cond="val1 == 1" target="conf:pass"/>
      <onexit>
	    <script>val1 := val1 + 1</script>
      </onexit>
    </state>
  </parallel>
  <state id="conf:pass"/>
  <state id="conf:fail"/>
</scxml>
