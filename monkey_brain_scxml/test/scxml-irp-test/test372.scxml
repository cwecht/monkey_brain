<?xml version="1.0"?>
<!--
 test that entering a final state generates done.state.parentid after executing the onentry elements.  
Var1 should be set to 2 (but not 3) by the time the event is raised 
-->
<scxml version="1.0" initial="s0">
  <state id="s0" initial="s0final">
    <transition event="done.state.s0" cond="val1 == 2" target="conf:pass"/>
    <transition event="*" target="conf:fail"/>
    <final id="s0final">
      <onentry>
	<script>val1 := 2</script>
      </onentry>
      <onexit>
	<script>val1 := 3</script>
      </onexit>
    </final>
  </state>
  <state id="conf:pass"/>
  <state id="conf:fail"/>
</scxml>
